<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // fetch는 response를 resolve하는 promise를 리턴한다
      // 즉, return Promise.resolve(response); 이런 느낌.
      // response는 객체이다.
      // 그래서 .then((response)=>...) 이렇게 response를 받아올 수 있음

      fetch(
        'https://www.7timer.info/bin/astro.php?lon=113.2&lat=23.1&ac=0&unit=metric&output=json&tzshift=0'
      )
        .then((response) => {
          return response.json();
          // response 바디 안에 있는 json 문자열을 js에서 쓸 수 있는 obj으로 변환해줌.
          // 근데 json으로 변환하는 과정이 길잖아? 비동기로 진행하는거
          // 그래서 response.json()에서 json()함수도 promise객체를 return 한다
          // 즉, return Promise.resolve(data); 이런 느낌.
          // 여기서 data는 json에서 obj로 변환된 data인듯
          // 그래서 chaining을 해줘서 처리해야함. 그래서 다음 줄에 .then이 나옴
        })
        .then((data) => console.log(data.dataseries));
        // response.json()에서 resolve할 때 보낸 data를 받아서 활용한거임
    </script>
  </body>
</html>
